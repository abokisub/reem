# Dynamic System Name Implementation - Complete Guide

## Problem
The React frontend has hardcoded "PointPay" and "PointWave" references throughout the application. The system name should be fetched dynamically from `/secure/info` endpoint which returns the `app_name` from the `general` table in the database.

## Solution Implemented

### 1. Backend Changes ✅

**File:** `app/Http/Controllers/API/AppController.php`

Added `system` object to `/secure/info` endpoint response:

```php
'system' => [
    'name' => $general->app_name ?? 'Kobopoint',
    'email' => $general->app_email,
    'phone' => $general->app_phone,
    'address' => $general->app_address,
],
```

### 2. Frontend Infrastructure ✅

Created three new files:

**A. System Context** (`frontend/src/contexts/SystemContext.js`)
- Fetches system info from `/secure/info` on app load
- Provides `systemName`, `systemInfo`, and `loading` state
- Falls back to 'Kobopoint' if fetch fails

**B. System Hook** (`frontend/src/hooks/useSystemName.js`)
- Simple hook: `const systemName = useSystemName();`
- Returns the dynamic system name

**C. Provider Setup** (`frontend/src/index.js`)
- Added `<SystemProvider>` wrapper around the app
- System info loads once when app starts

### 3. Files That Need Updates

The following files have hardcoded "PointPay" or "PointWave" references and need to be updated to use `useSystemName()`:

#### Documentation Components (High Priority)
1. `frontend/src/pages/dashboard/Documentation/Authentication.js`
   - Line 17: `export default function PointPayAuthentication()`
   - Line 31: "PointPay uses API keys..."
   
2. `frontend/src/pages/dashboard/Documentation/Introduction.js`
   - Line 31: `export default function PointPayIntroduction()`
   - Line 42: "Welcome to PointPay API"
   - Line 45: "PointPay is an enterprise-grade..."

3. `frontend/src/pages/dashboard/Documentation/ErrorCodes.js`
   - Line 17: "Something went wrong on PointPay's end"
   - Line 34: "PointPay uses conventional HTTP..."
   - Line 36: "error with PointPay's servers"

4. `frontend/src/pages/dashboard/Documentation/Refunds.js`
   - Line 64: "PointPay allows you to..."

5. `frontend/src/pages/dashboard/Documentation/Webhooks.js`
   - Line 61: "PointPay uses webhooks..."
   - Line 120: "PointPay will attempt to redeliver..."

6. `frontend/src/pages/dashboard/Documentation/Sandbox.js`
   - Line 22: "The Sandbox is a complete replica of the PointPay..."

7. `frontend/src/pages/dashboard/Documentation/IdentityVerification.js`
   - Line 68: "PointPay supports real-time verification..."

8. `frontend/src/layouts/dashboard/documentation/DocumentationLayout.js`
   - Line 133: "Pointwave Overview"

#### Dashboard Pages
9. `frontend/src/pages/dashboard/depositinvoice.js`
   - Line 247: "official transaction receipt...at PointPay"

10. `frontend/src/pages/dashboard/RATransactionDetails.js`
    - Line 197: `'PointWave Business'`
    - Line 363: "automated transaction receipt generated by PointPay"

11. `frontend/src/pages/dashboard/ApiDocumentation.js`
    - Multiple URL references to `pointwave.ng`
    - Line 494: "support@pointwave.ng"

### 4. How to Update Each File

**Pattern to follow:**

```javascript
// BEFORE
export default function PointPayAuthentication() {
    const theme = useTheme();
    
    return (
        <Typography>
            PointPay uses API keys to authenticate requests.
        </Typography>
    );
}

// AFTER
import useSystemName from '../../../hooks/useSystemName';

export default function Authentication() {
    const theme = useTheme();
    const systemName = useSystemName();
    
    return (
        <Typography>
            {systemName} uses API keys to authenticate requests.
        </Typography>
    );
}
```

### 5. URL References

URLs like `https://api.pointwave.ng` and `https://app.pointwave.ng` should remain as-is since they are actual API endpoints, not display names.

Only replace display text like:
- "PointPay API"
- "PointPay uses..."
- "Welcome to PointPay"
- "PointWave Business"

### 6. Deployment Steps

1. **Backend:**
   ```bash
   # Already done - /secure/info now returns system.name
   git add app/Http/Controllers/API/AppController.php
   git commit -m "Add system name to /secure/info endpoint"
   git push origin main
   ```

2. **Frontend:**
   ```bash
   cd frontend
   
   # Install dependencies (if needed)
   npm install --legacy-peer-deps
   
   # Build production bundle
   npm run build
   ```

3. **Deploy to Server:**
   ```bash
   # On server
   cd app.pointwave.ng
   git pull origin main
   cd frontend
   npm install --legacy-peer-deps
   npm run build
   ```

### 7. Testing

After deployment, verify:

1. **System Name Loads:**
   - Open browser console
   - Check Network tab for `/secure/info` request
   - Verify response contains `system.name`

2. **Documentation Shows Correct Name:**
   - Visit `/documentation/authentication`
   - Check that page title and content show "Kobopoint" (or your configured name)
   - NOT "PointPay"

3. **Fallback Works:**
   - If `/secure/info` fails, should default to "Kobopoint"

### 8. Database Configuration

To change the system name:

```sql
UPDATE general SET app_name = 'Your System Name' WHERE id = 1;
```

The change will be reflected immediately on next page load (no rebuild needed).

### 9. Benefits

✅ Single source of truth for system name  
✅ No hardcoded references  
✅ Easy to rebrand - just update database  
✅ Consistent across all pages  
✅ Professional white-label solution  

### 10. Next Steps

Run the automated replacement script (to be created) that will:
1. Update all 11+ files listed above
2. Replace hardcoded text with `{systemName}` variable
3. Add `useSystemName()` import to each file
4. Preserve URL references (don't replace those)

## Status: Infrastructure Complete ✅

- Backend endpoint updated ✅
- System context created ✅
- System hook created ✅
- Provider added to app ✅
- Ready for file-by-file updates ⏳

## Estimated Impact

- 11+ files to update
- ~30-40 text replacements
- 0 breaking changes
- 100% backward compatible
