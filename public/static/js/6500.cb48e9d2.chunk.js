"use strict";(self.webpackChunkabokisub_recovered=self.webpackChunkabokisub_recovered||[]).push([[6500],{6500:(e,t,o)=>{o.r(t),o.d(t,{default:()=>B});var n=o(19252),a=o(48407),r=o(11737),s=o(19838),i=o(24753),l=o(80899),d=o(65043),c=o(73216),u=o(46987),p=o(73023),m=o.n(p),h=o(24858),v=o(18403),x=o(72812),g=o(85865),b=o(68903),A=o(14194),f=o(12110),j=o(96446),y=o(88911),w=o(84473),k=o(33708),S=o(73338),C=o(30342),I=o(26776),N=o(70579);function T(){var e;const t=l.Ik().shape({phone:l.Yj().required("Phone Number Required"),type:l.Yj().required("Network Type Required")}),o=l.Ik().shape({phone:l.Yj().required("Phone Number Required"),pin:l.Yj().min(4,"Transaction Pin Must Be 4 Digits").max(4,"Transaction Pin Must Be 4 Digit").required("Transaction Pin Required"),type:l.Yj().required("Network Type Required")}),{enqueueSnackbar:n}=(0,u.dh)(),[r,s]=(0,d.useState)(""),i=(0,c.Zp)(),[p,T]=(0,d.useState)(),[B,M]=(0,d.useState)(),[P,R]=(0,d.useState)(),[L,O]=(0,d.useState)(),[_,q]=(0,d.useState)(),[E,G]=(0,d.useState)(),Y=window.localStorage.getItem("accessToken"),{setting:z}=(0,C.A)(),W=1===(null===z||void 0===z||null===(e=z.setting)||void 0===e?void 0:e.allow_pin),D=(0,h.mN)({resolver:(0,v.t)(W?o:t)}),[F,V]=(0,d.useState)(),{setValue:Z,watch:H,handleSubmit:K,formState:{errors:U,isSubmitting:X}}=D,J=H(),Q=[{value:"VTU",code:"vtu"},{value:"Share and Sell",code:"sns"}];(0,d.useEffect)(()=>{w.A.get("/api/website/app/network").then(e=>{var t;T(null===(t=e.data)||void 0===t?void 0:t.network)})},[]);let $,ee,te;return(0,N.jsx)(k.Op,{methods:D,onSubmit:K(async e=>{$="1"===P?"MTN":"2"===P?"AIRTEL":"3"===P?"GLO":"4"===P?"9MOBILE":P;try{if(await m()({title:"Confirmation",text:"You are on the verge of gifting N".concat(L," of airtime to the ").concat($," number ").concat(null===e||void 0===e?void 0:e.phone,"."),icon:"warning",buttons:["Cancel","Confirm"]})){var t,o;const l=await w.A.post("/api/topup",{network:P,phone:e.phone,amount:L,plan_type:e.type,bypass:(null===e||void 0===e?void 0:e.bypass)||!1,pin:e.pin,token:Y});var n;if("success"===(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.status))m()({title:"success",text:"".concat(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message),icon:"success",buttons:["Okay","Invoice"],dangerMode:!0}).then(e=>{var t;e&&i("".concat(a.nB.general.invioce,"/").concat(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.transid,"/airtime"),{replace:!0});window.location.reload()});else if("fail"===(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.status)){var r;m()("Opps","".concat(null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.message),"error")}else{var s;m()("Info","".concat(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.message),"info")}}}catch(c){var l,d;if(void 0!==(null===c||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message))m()("Opps","".concat(null===c||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message),"error");else void 0!==(null===c||void 0===c?void 0:c.message)?m()("Opps","".concat(null===c||void 0===c?void 0:c.message),"error"):m()("Opps","Something went wrong","error")}}),children:(0,N.jsx)(b.Ay,{container:!0,spacing:3,children:(0,N.jsxs)(b.Ay,{item:!0,xs:12,md:8,children:[!!U.afterSubmit&&(0,N.jsx)(A.A,{severity:"error",children:U.afterSubmit.message}),(0,N.jsxs)(f.A,{sx:{p:3},children:[(0,N.jsxs)(j.A,{sx:{display:"grid",columnGap:1,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,N.jsxs)(k.tX,{name:"network",label:"Network",placeholder:"Network",onChange:e=>(async e=>{e?(R(e),await w.A.get("/api/verify/network/".concat(e,"/system/system?token=").concat(Y)).then(e=>{M(e.data.network),q(e.data.price_sns),G(e.data.price_vtu)}).catch(M(void 0))):M(void 0)})(e.target.value),value:P,children:[(0,N.jsx)("option",{value:""}),null===p||void 0===p?void 0:p.map(e=>(0,N.jsx)("option",{value:null===e||void 0===e?void 0:e.plan_id,disabled:0===(null===e||void 0===e?void 0:e.network_vtu)&&0===(null===e||void 0===e?void 0:e.network_share),children:null===e||void 0===e?void 0:e.network},null===e||void 0===e?void 0:e.code))]}),(0,N.jsxs)(k.tX,{name:"type",label:"Network Type",children:[(0,N.jsx)("option",{value:""}),void 0!==B&&(null===Q||void 0===Q?void 0:Q.map(e=>(0,N.jsx)("option",{value:null===e||void 0===e?void 0:e.code,disabled:"vtu"===(null===e||void 0===e?void 0:e.code)&&0===(null===B||void 0===B?void 0:B.network_vtu)||"sns"===(null===e||void 0===e?void 0:e.code)&&0===(null===B||void 0===B?void 0:B.network_share),children:null===e||void 0===e?void 0:e.value},null===e||void 0===e?void 0:e.code)))]}),(0,N.jsx)(k.o3,{name:"phone",label:"Phone Number",type:"number",inputProps:{inputMode:"numeric",pattern:"[0-9]*"},onChange:e=>{const t=e.target.value;Z("phone",t),null!==P&&void 0!==P&&""!==P?($="1"===P?"MTN":"2"===P?"AIRTEL":"3"===P?"GLO":"4"===P?"9MOBILE":P,""===t||t.length<6?s(""):(s(""),ee=/0702|0704|0803|0806|0703|0706|0813|0816|0810|0814|0903|0906|0913/.test(t)?"MTN":/0805|0807|0705|0815|0811|0905/.test(t)?"GLO":/0702|0704|0803|0806|0703|0706|0813|0816|0810|0814|0903|0906|0913/.test(t)?"GIFTING":/0802|0808|0708|0812|0701|0901|0902|0907|0912/.test(t)?"AIRTEL":/0809|0818|0817|0908|0909/.test(t)?"9MOBILE":/0804/.test(t)?"NTEL":"Unable to identify network !",te=ee===$?(0,N.jsx)(I.A,{icon:"icon-park:success",sx:{width:20,height:20,color:"success.main"}}):(0,N.jsx)(I.A,{icon:"akar-icons:circle-alert",sx:{width:20,height:20,color:"error.main"}}),s((0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(g.A,{variant:"subtitle2",sx:{mb:.5},children:[" Network is: ",(0,N.jsxs)("b",{children:[ee," "]}),te,(0,N.jsx)("br",{}),(0,N.jsxs)("i",{children:[(0,N.jsx)("b",{children:" NB: "})," Ignore this warning for ",(0,N.jsx)("b",{children:"Ported Numbers"})]})]})," "]})))):n("Network is Required",{variant:"error"})}}),(0,N.jsx)(N.Fragment,{children:r}),(0,N.jsx)(k.o3,{name:"amount",label:"Amount",type:"number",value:L,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},onChange:async e=>{const t=e.target.value;O(t),t?"vtu"===J.type?V(E?"\u20a6".concat((0,S.KZ)(t/100*E)):void 0):"sns"===J.type&&V(_?"\u20a6".concat((0,S.KZ)(t/100*_)):void 0):V(void 0)}}),W&&(0,N.jsx)(k.o3,{name:"pin",label:"Transaction Pin",type:"password",autoComplete:"new-password",inputProps:{inputMode:"numeric",pattern:"[0-9]*"}}),void 0!==F&&(0,N.jsx)(k.o3,{name:"discount",label:"Discount",value:F,disabled:!0}),(0,N.jsx)(k.b8,{name:"bypass",labelPlacement:"start",def:!1,label:(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(g.A,{variant:"subtitle2",sx:{mb:.5},children:"Bypass Phone Number"})}),sx:{mx:0,width:1,justifyContent:"space-between"}})]}),(0,N.jsx)(y.A,{alignItems:"flex-end",sx:{mt:3},children:(0,N.jsx)(x.A,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:X,children:"Purchase"})})]})]})})})}function B(){const{themeStretch:e}=(0,r.A)();return(0,N.jsx)(s.A,{title:"Buy Airtime",children:(0,N.jsxs)(n.A,{maxWidth:!e&&"lg",children:[(0,N.jsx)(i.A,{heading:"Buy Airtime",links:[{name:"Dashboard",href:a.nB.root},{name:"Airtime"}]}),(0,N.jsx)(T,{})]})})}},22698:(e,t,o)=>{o.d(t,{A:()=>B});var n=o(58168),a=o(98587),r=o(65043),s=o(58387),i=o(98610),l=o(88092),d=o(34535),c=o(98206),u=o(85865),p=o(67266),m=o(66734),h=o(70579);const v=(0,m.A)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var x=o(72949);const g=["slots","slotProps"],b=(0,d.Ay)(x.A)(e=>{let{theme:t}=e;return(0,n.A)({display:"flex",marginLeft:"calc(".concat(t.spacing(1)," * 0.5)"),marginRight:"calc(".concat(t.spacing(1)," * 0.5)")},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,n.A)({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":(0,n.A)({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:(0,p.tL)(t.palette.grey[200],.12)}:{backgroundColor:(0,p.tL)(t.palette.grey[600],.12)})})}),A=(0,d.Ay)(v)({width:24,height:16});const f=function(e){const{slots:t={},slotProps:o={}}=e,r=(0,a.A)(e,g),s=e;return(0,h.jsx)("li",{children:(0,h.jsx)(b,(0,n.A)({focusRipple:!0},r,{ownerState:s,children:(0,h.jsx)(A,(0,n.A)({as:t.CollapsedIcon,ownerState:s},o.collapsedIcon))}))})};var j=o(92532),y=o(72372);function w(e){return(0,y.Ay)("MuiBreadcrumbs",e)}const k=(0,j.A)("MuiBreadcrumbs",["root","ol","li","separator"]),S=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C=(0,d.Ay)(u.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{["& .".concat(k.li)]:t.li},t.root]})({}),I=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),N=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function T(e,t,o,n){return e.reduce((a,r,s)=>(s<e.length-1?a=a.concat(r,(0,h.jsx)(N,{"aria-hidden":!0,className:t,ownerState:n,children:o},"separator-".concat(s))):a.push(r),a),[])}const B=r.forwardRef(function(e,t){const o=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:u,component:p="nav",slots:m={},slotProps:v={},expandText:x="Show path",itemsAfterCollapse:g=1,itemsBeforeCollapse:b=1,maxItems:A=8,separator:j="/"}=o,y=(0,a.A)(o,S),[k,N]=r.useState(!1),B=(0,n.A)({},o,{component:p,expanded:k,expandText:x,itemsAfterCollapse:g,itemsBeforeCollapse:b,maxItems:A,separator:j}),M=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},w,t)})(B),P=(0,l.A)({elementType:m.CollapsedIcon,externalSlotProps:v.collapsedIcon,ownerState:B}),R=r.useRef(null),L=r.Children.toArray(d).filter(e=>r.isValidElement(e)).map((e,t)=>(0,h.jsx)("li",{className:M.li,children:e},"child-".concat(t)));return(0,h.jsx)(C,(0,n.A)({ref:t,component:p,color:"text.secondary",className:(0,s.A)(M.root,u),ownerState:B},y,{children:(0,h.jsx)(I,{className:M.ol,ref:R,ownerState:B,children:T(k||A&&L.length<=A?L:(e=>b+g>=e.length?e:[...e.slice(0,b),(0,h.jsx)(f,{"aria-label":x,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:P},onClick:()=>{N(!0);const e=R.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-g,e.length)])(L),M.separator,j,B)})}))})},24753:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(89379),a=o(80045),r=o(90620),s=o.n(r),i=o(96446),l=o(85865),d=o(88446),c=o(35475),u=o(22698),p=o(70579);const m=["links","activeLast"];function h(e){let{links:t,activeLast:o=!1}=e,r=(0,a.A)(e,m);const s=t[t.length-1].name,d=t.map(e=>(0,p.jsx)(v,{link:e},e.name)),c=t.map(e=>(0,p.jsx)("div",{children:e.name!==s?(0,p.jsx)(v,{link:e}):(0,p.jsx)(l.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:s})},e.name));return(0,p.jsx)(u.A,(0,n.A)((0,n.A)({separator:(0,p.jsx)(i.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},r),{},{children:o?d:c}))}function v(e){let{link:t}=e;const{href:o,name:n,icon:a}=t;return(0,p.jsxs)(d.A,{variant:"body2",component:c.N_,to:o||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[a&&(0,p.jsx)(i.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:a}),n]},n)}const x=["links","action","heading","moreLink","sx"];function g(e){let{links:t,action:o,heading:r,moreLink:c=[],sx:u}=e,m=(0,a.A)(e,x);return(0,p.jsxs)(i.A,{sx:(0,n.A)({mb:5},u),children:[(0,p.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,p.jsxs)(i.A,{sx:{flexGrow:1},children:[(0,p.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:r}),(0,p.jsx)(h,(0,n.A)({links:t},m))]}),o&&(0,p.jsx)(i.A,{sx:{flexShrink:0},children:o})]}),(0,p.jsx)(i.A,{sx:{mt:2},children:s()(c)?(0,p.jsx)(d.A,{href:c,target:"_blank",rel:"noopener",variant:"body2",children:c}):c.map(e=>(0,p.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e))})]})}}}]);
//# sourceMappingURL=6500.cb48e9d2.chunk.js.map