{"version":3,"file":"static/js/2246.efa07d82.chunk.js","mappings":"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","sources":["pages/dashboard/notif.js"],"sourcesContent":["import PropTypes from 'prop-types';\r\nimport { noCase } from 'change-case';\r\nimport { useState, useEffect } from 'react';\r\nimport { useSnackbar } from 'notistack';\r\n// @mui\r\nimport {\r\n  Box,\r\n  List,\r\n  Tooltip,\r\n  Divider,\r\n  Typography,\r\n  ListItemText,\r\n  ListSubheader,\r\n  ListItemAvatar,\r\n  ListItemButton,\r\n  Backdrop,\r\n  CircularProgress\r\n} from '@mui/material'; \r\n\r\n// components\r\nimport Iconify from '../../components/Iconify';\r\nimport Scrollbar from '../../components/Scrollbar';\r\nimport { IconButtonAnimate } from '../../components/animate';\r\nimport axios from '../../utils/axios';\r\nimport MyLogo from '../../components/userlogo';\r\n\r\nexport default function UserNotif() {\r\n\r\n\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const [notifications, setNotifications] = useState([]);\r\n   const [load,SetLoad] = useState(true);\r\n    const totalUnRead = notifications?.filter((item) => item?.status === 0).length;\r\n  \r\n\r\n   const AccessToken =  window.localStorage.getItem('accessToken');\r\n\r\n    \r\n    useEffect(() => {\r\n      axios.get(`/api/system/notification/user/${AccessToken}/request/user`).then(data => {\r\n         setNotifications(data.data.notif);\r\n         SetLoad(false)\r\n      }).catch(() => SetLoad(false));\r\n    }, [AccessToken]);\r\n    const handleMarkAllAsRead = async () => {\r\n      await axios(`/api/clear/notification/clear/all/${AccessToken}/by/user`).then(\r\n        setNotifications(\r\n          notifications?.map((notification) => ({\r\n            ...notification,\r\n            status: 1,\r\n          }))\r\n        ),\r\n        enqueueSnackbar('Marked Read Successfully')\r\n      );\r\n   \r\n    };\r\n  \r\n    return (\r\n      <>\r\n       <Backdrop\r\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\r\n        open={load}\r\n      >\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      \r\n          <Box sx={{ display: 'flex', alignItems: 'center', py: 2, px: 2.5 }}>\r\n            <Box sx={{ flexGrow: 1 }}>\r\n              <Typography variant=\"subtitle1\">Notifications</Typography>\r\n              <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>\r\n                You have {totalUnRead} unread messages\r\n              </Typography>\r\n            </Box>\r\n  \r\n            {totalUnRead > 0 && (\r\n              <Tooltip title=\" Mark all as read\">\r\n                <IconButtonAnimate color=\"primary\" onClick={handleMarkAllAsRead}>\r\n                  <Iconify icon=\"eva:done-all-fill\" width={20} height={20} />\r\n                </IconButtonAnimate>\r\n              </Tooltip>\r\n            )}\r\n          </Box>\r\n  \r\n          <Divider sx={{ borderStyle: 'dashed' }} />\r\n  \r\n          <Scrollbar>\r\n            <List\r\n              disablePadding\r\n              subheader={\r\n                <ListSubheader disableSticky sx={{ py: 1, px: 2.5, typography: 'overline' }}>\r\n                  All Notification\r\n                </ListSubheader>\r\n              }\r\n            >\r\n              {notifications?.map((notification) => (\r\n                <NotificationItem key={notification.id} notification={notification} />\r\n              ))}\r\n            </List>\r\n          </Scrollbar>\r\n  \r\n          <Divider sx={{ borderStyle: 'dashed' }} />\r\n      </>\r\n    );\r\n  }\r\n  \r\n  // ----------------------------------------------------------------------\r\n  \r\n  NotificationItem.propTypes = {\r\n    notification: PropTypes.shape({\r\n      date: PropTypes.string,\r\n      id: PropTypes.number,\r\n      title: PropTypes.string,\r\n      status: PropTypes.number,\r\n      description: PropTypes.string,\r\n      type: PropTypes.string,\r\n      avatar: PropTypes.any,\r\n      profile_image: PropTypes.any,\r\n    }),\r\n  };\r\n  \r\n  function NotificationItem({ notification }) {\r\n    const {  title } = renderContent(notification);\r\n  \r\n    return (\r\n      <ListItemButton\r\n        sx={{\r\n          py: 1.5,\r\n          px: 2.5,\r\n          mt: '1px',\r\n          ...(notification?.status===0 && {\r\n            bgcolor: 'action.selected',\r\n          }),\r\n        }}\r\n      >\r\n        <ListItemAvatar>\r\n        <MyLogo username={notification?.profile_image}/>\r\n        </ListItemAvatar>\r\n        <ListItemText\r\n          primary={title}\r\n          secondary={\r\n            <Typography\r\n              variant=\"caption\"\r\n              sx={{\r\n                mt: 0.5,\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                color: 'text.disabled',\r\n              }}\r\n            >\r\n              <Iconify icon=\"eva:clock-outline\" sx={{ mr: 0.5, width: 16, height: 16 }} />\r\n              {notification?.date}\r\n            </Typography>\r\n          }\r\n        />\r\n      </ListItemButton>\r\n    );\r\n  }\r\n  \r\n\r\n  \r\n  // ----------------------------------------------------------------------\r\n  \r\n  function renderContent(notification) {\r\n    const title = (\r\n      <Typography variant=\"subtitle2\">\r\n        SYSTEM NOTIFICATION\r\n        <Typography component=\"span\" variant=\"body2\" sx={{ color: 'text.secondary' }}>\r\n          &nbsp; {noCase(notification?.message)}\r\n        </Typography>\r\n      </Typography>\r\n    );\r\n  \r\n      return {\r\n        title,\r\n      };\r\n  }\r\n"],"names":["UserNotif","enqueueSnackbar","useSnackbar","notifications","setNotifications","useState","load","SetLoad","totalUnRead","filter","item","status","length","AccessToken","window","localStorage","getItem","useEffect","axios","get","concat","then","data","notif","catch","_jsxs","_Fragment","children","_jsx","Backdrop","sx","color","zIndex","theme","drawer","open","CircularProgress","Box","display","alignItems","py","px","flexGrow","Typography","variant","Tooltip","title","IconButtonAnimate","onClick","async","map","notification","_objectSpread","Iconify","icon","width","height","Divider","borderStyle","Scrollbar","List","disablePadding","subheader","ListSubheader","disableSticky","typography","NotificationItem","id","_ref","component","noCase","message","renderContent","ListItemButton","mt","bgcolor","ListItemAvatar","MyLogo","username","profile_image","ListItemText","primary","secondary","mr","date"],"sourceRoot":""}