"use strict";(self.webpackChunkabokisub_recovered=self.webpackChunkabokisub_recovered||[]).push([[2246],{72246:(e,i,s)=>{s.r(i),s.d(i,{default:()=>S});var t=s(89379),n=s(67457),a=s(65043),l=s(46987),o=s(12220),r=s(81637),d=s(96446),c=s(85865),x=s(18483),u=s(39336),h=s(35721),v=s(90469),A=s(80311),f=s(23851),j=s(26353),p=s(26776),y=s(90797),b=s(8210),m=s(84473),g=s(11033),k=s(70579);function S(){const{enqueueSnackbar:e}=(0,l.dh)(),[i,s]=(0,a.useState)([]),[n,A]=(0,a.useState)(!0),f=null===i||void 0===i?void 0:i.filter(e=>0===(null===e||void 0===e?void 0:e.status)).length,j=window.localStorage.getItem("accessToken");(0,a.useEffect)(()=>{m.A.get("/api/system/notification/user/".concat(j,"/request/user")).then(e=>{s(e.data.notif),A(!1)}).catch(()=>A(!1))},[j]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:n,children:(0,k.jsx)(r.A,{color:"inherit"})}),(0,k.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",py:2,px:2.5},children:[(0,k.jsxs)(d.A,{sx:{flexGrow:1},children:[(0,k.jsx)(c.A,{variant:"subtitle1",children:"Notifications"}),(0,k.jsxs)(c.A,{variant:"body2",sx:{color:"text.secondary"},children:["You have ",f," unread messages"]})]}),f>0&&(0,k.jsx)(x.A,{title:" Mark all as read",children:(0,k.jsx)(b.ji,{color:"primary",onClick:async()=>{await(0,m.A)("/api/clear/notification/clear/all/".concat(j,"/by/user")).then(s(null===i||void 0===i?void 0:i.map(e=>(0,t.A)((0,t.A)({},e),{},{status:1}))),e("Marked Read Successfully"))},children:(0,k.jsx)(p.A,{icon:"eva:done-all-fill",width:20,height:20})})})]}),(0,k.jsx)(u.A,{sx:{borderStyle:"dashed"}}),(0,k.jsx)(y.A,{children:(0,k.jsx)(h.A,{disablePadding:!0,subheader:(0,k.jsx)(v.A,{disableSticky:!0,sx:{py:1,px:2.5,typography:"overline"},children:"All Notification"}),children:null===i||void 0===i?void 0:i.map(e=>(0,k.jsx)(w,{notification:e},e.id))})}),(0,k.jsx)(u.A,{sx:{borderStyle:"dashed"}})]})}function w(e){let{notification:i}=e;const{title:s}=function(e){const i=(0,k.jsxs)(c.A,{variant:"subtitle2",children:["SYSTEM NOTIFICATION",(0,k.jsxs)(c.A,{component:"span",variant:"body2",sx:{color:"text.secondary"},children:["\xa0 ",(0,n.W7)(null===e||void 0===e?void 0:e.message)]})]});return{title:i}}(i);return(0,k.jsxs)(A.A,{sx:(0,t.A)({py:1.5,px:2.5,mt:"1px"},0===(null===i||void 0===i?void 0:i.status)&&{bgcolor:"action.selected"}),children:[(0,k.jsx)(f.A,{children:(0,k.jsx)(g.A,{username:null===i||void 0===i?void 0:i.profile_image})}),(0,k.jsx)(j.A,{primary:s,secondary:(0,k.jsxs)(c.A,{variant:"caption",sx:{mt:.5,display:"flex",alignItems:"center",color:"text.disabled"},children:[(0,k.jsx)(p.A,{icon:"eva:clock-outline",sx:{mr:.5,width:16,height:16}}),null===i||void 0===i?void 0:i.date]})})]})}}}]);
//# sourceMappingURL=2246.efa07d82.chunk.js.map