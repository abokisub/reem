"use strict";(self.webpackChunkabokisub_recovered=self.webpackChunkabokisub_recovered||[]).push([[2475],{22698:(e,t,n)=>{n.d(t,{A:()=>P});var r=n(58168),o=n(98587),s=n(65043),a=n(58387),i=n(98610),l=n(88092),d=n(34535),c=n(98206),u=n(85865),p=n(67266),h=n(66734),m=n(70579);const x=(0,h.A)((0,m.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var v=n(72949);const g=["slots","slotProps"],A=(0,d.Ay)(v.A)(e=>{let{theme:t}=e;return(0,r.A)({display:"flex",marginLeft:"calc(".concat(t.spacing(1)," * 0.5)"),marginRight:"calc(".concat(t.spacing(1)," * 0.5)")},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,r.A)({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":(0,r.A)({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:(0,p.tL)(t.palette.grey[200],.12)}:{backgroundColor:(0,p.tL)(t.palette.grey[600],.12)})})}),b=(0,d.Ay)(x)({width:24,height:16});const f=function(e){const{slots:t={},slotProps:n={}}=e,s=(0,o.A)(e,g),a=e;return(0,m.jsx)("li",{children:(0,m.jsx)(A,(0,r.A)({focusRipple:!0},s,{ownerState:a,children:(0,m.jsx)(b,(0,r.A)({as:t.CollapsedIcon,ownerState:a},n.collapsedIcon))}))})};var j=n(92532),w=n(72372);function y(e){return(0,w.Ay)("MuiBreadcrumbs",e)}const k=(0,j.A)("MuiBreadcrumbs",["root","ol","li","separator"]),S=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C=(0,d.Ay)(u.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{["& .".concat(k.li)]:t.li},t.root]})({}),R=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),T=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function I(e,t,n,r){return e.reduce((o,s,a)=>(a<e.length-1?o=o.concat(s,(0,m.jsx)(T,{"aria-hidden":!0,className:t,ownerState:r,children:n},"separator-".concat(a))):o.push(s),o),[])}const P=s.forwardRef(function(e,t){const n=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:u,component:p="nav",slots:h={},slotProps:x={},expandText:v="Show path",itemsAfterCollapse:g=1,itemsBeforeCollapse:A=1,maxItems:b=8,separator:j="/"}=n,w=(0,o.A)(n,S),[k,T]=s.useState(!1),P=(0,r.A)({},n,{component:p,expanded:k,expandText:v,itemsAfterCollapse:g,itemsBeforeCollapse:A,maxItems:b,separator:j}),N=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},y,t)})(P),O=(0,l.A)({elementType:h.CollapsedIcon,externalSlotProps:x.collapsedIcon,ownerState:P}),q=s.useRef(null),E=s.Children.toArray(d).filter(e=>s.isValidElement(e)).map((e,t)=>(0,m.jsx)("li",{className:N.li,children:e},"child-".concat(t)));return(0,m.jsx)(C,(0,r.A)({ref:t,component:p,color:"text.secondary",className:(0,a.A)(N.root,u),ownerState:P},w,{children:(0,m.jsx)(R,{className:N.ol,ref:q,ownerState:P,children:I(k||b&&E.length<=b?E:(e=>A+g>=e.length?e:[...e.slice(0,A),(0,m.jsx)(f,{"aria-label":v,slots:{CollapsedIcon:h.CollapsedIcon},slotProps:{collapsedIcon:O},onClick:()=>{T(!0);const e=q.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-g,e.length)])(E),N.separator,j,P)})}))})},24753:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(89379),o=n(80045),s=n(90620),a=n.n(s),i=n(96446),l=n(85865),d=n(88446),c=n(35475),u=n(22698),p=n(70579);const h=["links","activeLast"];function m(e){let{links:t,activeLast:n=!1}=e,s=(0,o.A)(e,h);const a=t[t.length-1].name,d=t.map(e=>(0,p.jsx)(x,{link:e},e.name)),c=t.map(e=>(0,p.jsx)("div",{children:e.name!==a?(0,p.jsx)(x,{link:e}):(0,p.jsx)(l.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:a})},e.name));return(0,p.jsx)(u.A,(0,r.A)((0,r.A)({separator:(0,p.jsx)(i.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},s),{},{children:n?d:c}))}function x(e){let{link:t}=e;const{href:n,name:r,icon:o}=t;return(0,p.jsxs)(d.A,{variant:"body2",component:c.N_,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[o&&(0,p.jsx)(i.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:o}),r]},r)}const v=["links","action","heading","moreLink","sx"];function g(e){let{links:t,action:n,heading:s,moreLink:c=[],sx:u}=e,h=(0,o.A)(e,v);return(0,p.jsxs)(i.A,{sx:(0,r.A)({mb:5},u),children:[(0,p.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,p.jsxs)(i.A,{sx:{flexGrow:1},children:[(0,p.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:s}),(0,p.jsx)(m,(0,r.A)({links:t},h))]}),n&&(0,p.jsx)(i.A,{sx:{flexShrink:0},children:n})]}),(0,p.jsx)(i.A,{sx:{mt:2},children:a()(c)?(0,p.jsx)(d.A,{href:c,target:"_blank",rel:"noopener",variant:"body2",children:c}):c.map(e=>(0,p.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e))})]})}},92475:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var r=n(19252),o=n(48407),s=n(11737),a=n(19838),i=n(24753),l=n(80899),d=n(65043),c=n(46987),u=n(73216),p=n(73023),h=n.n(p),m=n(24858),x=n(18403),v=n(72812),g=n(85865),A=n(68903),b=n(12110),f=n(88911),j=n(96446),w=n(39336),y=n(84473),k=n(33708),S=n(73338),C=n(30342),R=n(26776),T=n(43409),I=n(70579);function P(){var e,t,n,r,s,a,i;const{enqueueSnackbar:p}=(0,c.dh)(),P=(0,u.Zp)(),[N,O]=(0,d.useState)(),[q,E]=(0,d.useState)(""),[V,B]=(0,d.useState)(!1),[M,_]=(0,d.useState)(!1),Y=window.localStorage.getItem("accessToken"),{setting:L}=(0,C.A)(),W=((0,T.A)(),1===(null===L||void 0===L||null===(e=L.setting)||void 0===e?void 0:e.allow_pin)),[X,z]=(0,d.useState)("INIT"),[$,D]=(0,d.useState)(""),[F,U]=(0,d.useState)(""),[G,H]=(0,d.useState)("0.00"),[Z,K]=(0,d.useState)(null),J=l.Ik().shape({phone:l.Yj().required("Sender Phone Number Required").min(11,"Must be at least 11 digits"),network:l.Yj().required("Network Required"),otp:l.Yj().when("$step",{is:"VERIFY",then:e=>e.required("OTP Required").length(6,"OTP must be 6 digits"),otherwise:e=>e.notRequired()}),amount:l.ai().transform(e=>isNaN(e)?void 0:e).when("$step",{is:"CONVERT",then:e=>e.required("Amount Required").positive("Amount must be positive"),otherwise:e=>e.notRequired()}),transferPin:l.Yj().when("$step",{is:"CONVERT",then:e=>e.required("Share and Sell PIN Required"),otherwise:e=>e.notRequired()}),type:l.Yj().when("$step",{is:"CONVERT",then:e=>e.required("Payment Method Required"),otherwise:e=>e.notRequired()}),pin:l.Yj().when(["$step","$pin_enabled"],{is:(e,t)=>"CONVERT"===e&&t,then:e=>e.required("System Transaction Pin Required"),otherwise:e=>e.notRequired()})}),Q=(0,m.mN)({resolver:(0,x.t)(J),context:{step:X,pin_enabled:W},defaultValues:{phone:"",network:"",otp:"",amount:"",transferPin:"",type:"wallet",pin:""}}),{setValue:ee,watch:te,handleSubmit:ne,formState:{errors:re}}=Q,oe=te();(0,d.useEffect)(()=>{y.A.get("/api/website/app/network").then(e=>{var t;O(null===(t=e.data)||void 0===t?void 0:t.network)})},[]),(0,d.useEffect)(()=>{Q.reset(oe,{keepValues:!0,keepDefaultValues:!0,context:{step:X,pin_enabled:W}})},[X,W]);return(0,I.jsx)(k.Op,{methods:Q,onSubmit:ne(e=>{"INIT"===X?(async e=>{B(!0);try{const t=await y.A.post("/api/autopilot/a2c/otp",{network:e.network,sender_number:e.phone,amount:100});D(t.data.identifier),z("VERIFY"),p("OTP sent to your phone")}catch(r){var t,n;p((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Error sending OTP",{variant:"error"})}B(!1)})(e):"VERIFY"===X?(async e=>{B(!0);try{const t=await y.A.post("/api/autopilot/a2c/verify",{identifier:$,otp:e.otp});U(t.data.sessionId),H(t.data.balance),z("CONVERT"),p("OTP verified successfully")}catch(r){var t,n;p((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Verification failed",{variant:"error"})}B(!1)})(e):"CONVERT"===X&&(async e=>{B(!0);try{const t=await y.A.post("/api/cash",{network:e.network,payment_type:e.type,sender_number:e.phone,amount:e.amount,token:Y,pin:e.pin,bypass:!1,automated:!0});await y.A.post("/api/autopilot/a2c/submit",{sessionId:F,transid:t.data.transid,transferPin:e.transferPin}),h()("Success","Airtime conversion successful","success"),P("".concat(o.nB.general.invioce,"/").concat(t.data.transid,"/airtimecash"),{replace:!0})}catch(r){var t,n;p((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Conversion failed",{variant:"error"})}B(!1)})(e)}),children:(0,I.jsx)(A.Ay,{container:!0,spacing:3,children:(0,I.jsx)(A.Ay,{item:!0,xs:12,md:8,children:(0,I.jsx)(b.A,{sx:{p:3},children:(0,I.jsxs)(f.A,{spacing:3,children:[(0,I.jsx)(g.A,{variant:"h5",align:"center",gutterBottom:!0,children:"Automated Airtime to Cash"}),"INIT"===X&&(0,I.jsxs)(f.A,{spacing:3,children:[(0,I.jsxs)(k.tX,{name:"network",label:"Select Network",error:!!re.network,helperText:null===(t=re.network)||void 0===t?void 0:t.message,children:[(0,I.jsx)("option",{value:""}),null===N||void 0===N?void 0:N.map(e=>(0,I.jsx)("option",{value:null===e||void 0===e?void 0:e.network,disabled:0===(null===e||void 0===e?void 0:e.cash),children:null===e||void 0===e?void 0:e.network},null===e||void 0===e?void 0:e.code))]}),(0,I.jsx)(k.o3,{name:"phone",label:"Sender Phone Number",type:"number",placeholder:"080XXXXXXXX",onChange:e=>{const t=e.target.value;if(ee("phone",t),""===t||t.length<6)return void E("");let n="Unable to identify network !";/0702|0704|0803|0806|0703|0706|0813|0816|0810|0814|0903|0906|0913|0713|0716|0916/.test(t)?n="MTN":/0805|0807|0705|0815|0811|0905|0907|0707|0817|0917|0717|0715|0915|0711|0911/.test(t)?n="GLO":/0802|0808|0708|0812|0701|0901|0902|0907|0912|0904|0908|0918|0818|0718|0712|0801/.test(t)?n="AIRTEL":/0809|0818|0817|0908|0909|0709|0819|0919|0719|0817|0718|0918/.test(t)&&(n="9MOBILE");const r=oe.network;let o;if(o=n===r?(0,I.jsx)(R.A,{icon:"icon-park:success",sx:{width:20,height:20,color:"success.main"}}):(0,I.jsx)(R.A,{icon:"akar-icons:circle-alert",sx:{width:20,height:20,color:"error.main"}}),"Unable to identify network !"!==n){const e=null===N||void 0===N?void 0:N.find(e=>e.network===n);e&&ee("network",e.network)}E((0,I.jsxs)(g.A,{variant:"subtitle2",sx:{mb:.5,mt:1},children:["Network identified: ",(0,I.jsxs)("b",{children:[n," "]})," ",o,(0,I.jsx)("br",{}),(0,I.jsxs)("i",{children:[(0,I.jsx)("b",{children:"NB:"})," Ignore if number is ported."]})]}))},error:!!re.phone,helperText:null===(n=re.phone)||void 0===n?void 0:n.message}),q,(0,I.jsx)(v.A,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:V,children:"Proceed"})]}),"VERIFY"===X&&(0,I.jsxs)(f.A,{spacing:3,children:[(0,I.jsxs)(g.A,{variant:"body2",align:"center",children:["A 6-digit OTP has been sent to ",(0,I.jsx)("b",{children:oe.phone}),". Please enter it below to proceed."]}),(0,I.jsx)(k.o3,{name:"otp",label:"Enter 6-Digit OTP",type:"number",error:!!re.otp,helperText:null===(r=re.otp)||void 0===r?void 0:r.message}),(0,I.jsx)(f.A,{direction:"row",justifyContent:"flex-end",children:(0,I.jsx)(v.A,{size:"small",onClick:async()=>{_(!0);try{const e=await y.A.post("/api/autopilot/a2c/otp",{network:oe.network,sender_number:oe.phone,amount:100});e.data.identifier&&D(e.data.identifier),p("OTP resent successfully")}catch(n){var e,t;p((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Error resending OTP",{variant:"error"})}_(!1)},loading:M,sx:{p:0,minWidth:"auto","&:hover":{bgcolor:"transparent",textDecoration:"underline"}},children:"Resend OTP?"})}),(0,I.jsx)(v.A,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:V,children:"Verify & Proceed"}),(0,I.jsx)(v.A,{fullWidth:!0,variant:"outlined",onClick:()=>z("INIT"),children:"Change Phone Number"})]}),"CONVERT"===X&&(0,I.jsxs)(f.A,{spacing:3,children:[(0,I.jsx)(j.A,{sx:{p:2,bgcolor:"background.neutral",borderRadius:1},children:(0,I.jsxs)(f.A,{direction:"row",justifyContent:"space-between",children:[(0,I.jsx)(g.A,{variant:"subtitle2",children:"SIM Airtime Balance:"}),(0,I.jsxs)(g.A,{variant:"subtitle2",color:"primary.main",children:["\u20a6",G]})]})}),(0,I.jsx)(k.o3,{name:"amount",label:"Amount to Convert",type:"number",onChange:async e=>{const t=e.target.value;if(ee("amount",t),t>0)try{const e=await y.A.post("/api/airtimecash/discount/admin",{amount:t,network:oe.network});K(e.data.amount)}catch(n){K(null)}else K(null)},error:!!re.amount,helperText:null===(s=re.amount)||void 0===s?void 0:s.message}),null!==Z&&(0,I.jsx)(j.A,{sx:{p:2,bgcolor:"success.lighter",borderRadius:1},children:(0,I.jsxs)(f.A,{direction:"row",justifyContent:"space-between",children:[(0,I.jsx)(g.A,{variant:"subtitle2",color:"success.darker",children:"You will receive:"}),(0,I.jsxs)(g.A,{variant:"subtitle2",color:"success.darker",children:["\u20a6",(0,S.KZ)(Z)]})]})}),(0,I.jsx)(k.o3,{name:"transferPin",label:"Share and Sell Actual PIN",type:"password",placeholder:"Telco Transfer PIN",error:!!re.transferPin,helperText:null===(a=re.transferPin)||void 0===a?void 0:a.message}),(0,I.jsx)("input",{type:"hidden",name:"type",value:"wallet"}),W&&(0,I.jsx)(k.o3,{name:"pin",label:"System Transaction Pin",type:"password",error:!!re.pin,helperText:null===(i=re.pin)||void 0===i?void 0:i.message}),(0,I.jsx)(v.A,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"success",loading:V,children:"Convert Airtime"}),(0,I.jsx)(v.A,{fullWidth:!0,variant:"outlined",onClick:()=>z("VERIFY"),children:"Back"})]}),(0,I.jsx)(w.A,{}),(0,I.jsxs)(g.A,{variant:"caption",color:"text.secondary",align:"center",sx:{display:"block",mt:2},children:["\ud83d\udca1 To change or create share and sell PIN dial ",(0,I.jsx)("b",{children:"*32#"})," via USSD on your phone"]})]})})})})})}function N(){const{themeStretch:e}=(0,s.A)();return(0,I.jsx)(a.A,{title:"Airtime 2 Cash",children:(0,I.jsxs)(r.A,{maxWidth:!e&&"lg",children:[(0,I.jsx)(i.A,{heading:"Airtime 2 Cash",links:[{name:"Dashboard",href:o.nB.root},{name:"Airtime - Cash"}]}),(0,I.jsx)(P,{})]})})}}}]);
//# sourceMappingURL=2475.4a80f1bf.chunk.js.map