"use strict";(self.webpackChunkabokisub_recovered=self.webpackChunkabokisub_recovered||[]).push([[1057],{41057:(e,i,t)=>{t.r(i),t.d(i,{default:()=>w});var s=t(89379),n=t(67457),l=t(65043),a=t(46987),o=t(12220),r=t(81637),d=t(96446),c=t(85865),x=t(18483),u=t(39336),h=t(35721),v=t(90469),A=t(80311),f=t(23851),j=t(26353),p=t(26776),y=t(90797),b=t(8210),m=t(84473),g=t(11033),k=t(70579);function w(){const{enqueueSnackbar:e}=(0,a.dh)(),[i,t]=(0,l.useState)([]),[n,A]=(0,l.useState)(!0),f=null===i||void 0===i?void 0:i.filter(e=>0===(null===e||void 0===e?void 0:e.status)).length,j=window.localStorage.getItem("accessToken");(0,l.useEffect)(()=>{m.A.get("/api/system/notification/user/".concat(j,"/request")).then(e=>{t(e.data.notif),A(!1)}).catch(()=>A(!1))},[j]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:n,children:(0,k.jsx)(r.A,{color:"inherit"})}),(0,k.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",py:2,px:2.5},children:[(0,k.jsxs)(d.A,{sx:{flexGrow:1},children:[(0,k.jsx)(c.A,{variant:"subtitle1",children:"Notifications"}),(0,k.jsxs)(c.A,{variant:"body2",sx:{color:"text.secondary"},children:["You have ",f," unread messages"]})]}),f>0&&(0,k.jsx)(x.A,{title:" Mark all as read",children:(0,k.jsx)(b.ji,{color:"primary",onClick:async()=>{await(0,m.A)("/api/clear/notification/clear/all/".concat(j,"/by/admin")).then(t(null===i||void 0===i?void 0:i.map(e=>(0,s.A)((0,s.A)({},e),{},{status:1}))),e("Marked Read Successfully"))},children:(0,k.jsx)(p.A,{icon:"eva:done-all-fill",width:20,height:20})})})]}),(0,k.jsx)(u.A,{sx:{borderStyle:"dashed"}}),(0,k.jsx)(y.A,{children:(0,k.jsx)(h.A,{disablePadding:!0,subheader:(0,k.jsx)(v.A,{disableSticky:!0,sx:{py:1,px:2.5,typography:"overline"},children:"All Notification"}),children:null===i||void 0===i?void 0:i.map(e=>(0,k.jsx)(S,{notification:e},e.id))})}),(0,k.jsx)(u.A,{sx:{borderStyle:"dashed"}})]})}function S(e){let{notification:i}=e;const{title:t}=function(e){const i=(0,k.jsxs)(c.A,{variant:"subtitle2",children:[null===e||void 0===e?void 0:e.title,(0,k.jsxs)(c.A,{component:"span",variant:"body2",sx:{color:"text.secondary"},children:["\xa0 ",(0,n.W7)(null===e||void 0===e?void 0:e.message)]})]});return{title:i}}(i);return(0,k.jsxs)(A.A,{sx:(0,s.A)({py:1.5,px:2.5,mt:"1px"},0===(null===i||void 0===i?void 0:i.status)&&{bgcolor:"action.selected"}),children:[(0,k.jsx)(f.A,{children:(0,k.jsx)(g.A,{username:null===i||void 0===i?void 0:i.profile_image})}),(0,k.jsx)(j.A,{primary:t,secondary:(0,k.jsxs)(c.A,{variant:"caption",sx:{mt:.5,display:"flex",alignItems:"center",color:"text.disabled"},children:[(0,k.jsx)(p.A,{icon:"eva:clock-outline",sx:{mr:.5,width:16,height:16}}),null===i||void 0===i?void 0:i.date]})})]})}}}]);
//# sourceMappingURL=1057.9fb1ea19.chunk.js.map