"use strict";(self.webpackChunkabokisub_recovered=self.webpackChunkabokisub_recovered||[]).push([[4327],{24327:(a,e,t)=>{t.r(e),t.d(e,{default:()=>E});var l=t(67457),n=t(65043),c=t(35475),s=t(26240),i=t(19252),r=t(12110),o=t(88911),d=t(53193),u=t(79190),h=t(23914),g=t(32143),p=t(8939),v=t(24056),b=t(79650),m=t(71806),A=t(73460),x=t(28076),y=t(10039),f=t(85865),j=t(78977),k=t(4598),w=t(19090),_=t(74605),S=t(48407),C=t(11737),R=t(19838),T=t(50467),H=t(90797),B=t(12670),P=t(24753),L=t(73338),D=t(11251),W=t(84473),F=t(70579);const I=[{id:"referrence",label:"Reference",alignRight:!1},{id:"type",label:"Type",alignRight:!1},{id:"details",label:"Details",alignRight:!1},{id:"phone",label:"Phone/Account",alignRight:!1},{id:"amount",label:"Amount",alignRight:!1},{id:"oldbal",label:"Old Bal",alignRight:!1},{id:"newbal",label:"New Bal",alignRight:!1},{id:"date",label:"Date",alignRight:!1},{id:"status",label:"Status",alignRight:!1},{id:"action",label:"Action",alignRight:!1}],N=[{value:"ALL",label:"ALL"},{value:1,label:"Success"},{value:0,label:"Processing"},{value:2,label:"Failed"}],z=[{value:"all",label:"All Transactions",endpoint:"history"},{value:"data",label:"Data",endpoint:"datatrans"},{value:"airtime",label:"Airtime",endpoint:"airtime"},{value:"cable",label:"Cable",endpoint:"cable"},{value:"bill",label:"Electricity",endpoint:"bill"},{value:"bulksms",label:"Bulk SMS",endpoint:"bulksms"},{value:"stock",label:"Stock",endpoint:"stock"},{value:"airtimecash",label:"Airtime 2 Cash",endpoint:"airtimecash"},{value:"result",label:"Result Checker",endpoint:"result"},{value:"data_card",label:"Data Card",endpoint:"data_card"},{value:"recharge_card",label:"Recharge Card",endpoint:"recharge_card"}];function E(){const a=(0,s.A)(),{themeStretch:e}=(0,C.A)(),[t,E]=(0,n.useState)([]),[K,Z]=(0,n.useState)(0),[M,O]=(0,n.useState)(!0),[Q,X]=(0,n.useState)(0),[q,G]=(0,n.useState)(""),[J,U]=(0,n.useState)(10),[V,Y]=(0,n.useState)(!1),[$,aa]=(0,n.useState)(!1),[ea,ta]=(0,n.useState)("ALL"),[la,na]=(0,n.useState)("all"),ca=window.localStorage.getItem("accessToken");(0,n.useEffect)(()=>{sa(K,J,ea,q,la)},[]);const sa=async function(a){let e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;e=a>K?a+1:a,O(!0);try{var s,i,r;let y,f;var o;if("all"===c)y=await W.A.get("/api/system/all/history/records/".concat(ca,"/secure?page=").concat(e,"&limit=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(o=y.data)||void 0===o?void 0:o.all_summary;else if("data"===c){var d;y=await W.A.get("/api/system/all/datatrans/system/".concat(ca,"/secure?page=").concat(e,"&Habukhan=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(d=y.data)||void 0===d?void 0:d.data_trans}else if("airtime"===c){var u;y=await W.A.get("/api/system/all/airtime/trans/system/".concat(ca,"/secure?page=").concat(e,"&Habukhan=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(u=y.data)||void 0===u?void 0:u.airtime_trans}else if("cable"===c){var h;y=await W.A.get("/api/system/all/cable/trans/system/".concat(ca,"/secure?page=").concat(e,"&Habukhan=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(h=y.data)||void 0===h?void 0:h.cable_trans}else if("bill"===c){var g;y=await W.A.get("/api/system/all/bill/trans/system/".concat(ca,"/secure?page=").concat(e,"&Habukhan=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(g=y.data)||void 0===g?void 0:g.bill_trans}else if("bulksms"===c){var p;y=await W.A.get("/api/system/all/bulksms/trans/system/".concat(ca,"/secure?page=").concat(e,"&Habukhan=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(p=y.data)||void 0===p?void 0:p.bulksms_trans}else if("stock"===c){var v;y=await W.A.get("/api/system/all/stock/trans/system/".concat(ca,"/secure?page=").concat(e,"&Habukhan=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(v=y.data)||void 0===v?void 0:v.stock_trans}else if("airtimecash"===c){var b;y=await W.A.get("/api/system/all/airtimecash/trans/system/".concat(ca,"/secure?page=").concat(e,"&Habukhan=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(b=y.data)||void 0===b?void 0:b.airtimecash_trans}else if("result"===c){var m;y=await W.A.get("/api/system/all/result/trans/system/".concat(ca,"/secure?page=").concat(e,"&Habukhan=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(m=y.data)||void 0===m?void 0:m.result_trans}else if("data_card"===c){var A;y=await W.A.get("/api/system/all/data_card/trans/system/".concat(ca,"/secure?page=").concat(e,"&Habukhan=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(A=y.data)||void 0===A?void 0:A.data_card_trans}else if("recharge_card"===c){var x;y=await W.A.get("/api/system/all/recharge_card/trans/system/".concat(ca,"/secure?page=").concat(e,"&Habukhan=").concat(t,"&status=").concat(l,"&search=").concat(n)),f=null===(x=y.data)||void 0===x?void 0:x.recharge_card_trans}E((null===(s=f)||void 0===s?void 0:s.data)||[]),X((null===(i=f)||void 0===i?void 0:i.total)||0),O(!1),Z(a),aa(0===((null===(r=f)||void 0===r?void 0:r.total)||0))}catch(y){console.error("Error fetching transactions:",y),O(!1),E([]),aa(!0)}};return(0,F.jsx)(R.A,{title:"Transactions",children:(0,F.jsxs)(i.A,{maxWidth:!e&&"lg",children:[(0,F.jsx)(P.A,{heading:"Transactions",links:[{name:"Dashboard",href:S.nB.general.app},{name:"Transactions"}]}),(0,F.jsxs)(r.A,{children:[(0,F.jsx)(o.A,{spacing:2,sx:{p:3,pb:0},children:(0,F.jsxs)(d.A,{fullWidth:!0,children:[(0,F.jsx)(u.A,{children:"Transaction Type"}),(0,F.jsx)(h.A,{value:la,label:"Transaction Type",onChange:a=>{const e=a.target.value;na(e),Z(0),sa(0,J,ea,q,e)},children:z.map(a=>(0,F.jsx)(g.A,{value:a.value,children:a.label},a.value))})]})}),(0,F.jsx)(p.A,{value:ea,scrollButtons:"auto",variant:"scrollable",allowScrollButtonsMobile:!0,onChange:(a,e)=>{ta(e),sa(K,J,e,q,la)},children:N.map(a=>(0,F.jsx)(v.A,{disableRipple:!0,label:(0,l.De)(a.label),value:a.value},a.value))}),(0,F.jsx)(D.tC,{filterName:q,onFilterName:async a=>{G(a),Z(0),sa(K,J,ea,a,la)}}),(0,F.jsx)(H.A,{children:(0,F.jsx)(b.A,{sx:{minWidth:800},children:(0,F.jsxs)(m.A,{size:V?"small":"medium",children:[(0,F.jsx)(D.dx,{order:"asc",orderBy:"id",headLabel:I,rowCount:t.length}),M?(0,F.jsx)(A.A,{children:(0,F.jsx)(x.A,{children:(0,F.jsx)(y.A,{align:"center",colSpan:10,sx:{py:3},children:(0,F.jsx)(f.A,{variant:"body2",children:"Loading ..."})})})}):(0,F.jsx)(A.A,{children:t.map((e,t)=>{var n;const{transid:s,plan_phone:i,amount:r,oldbal:o,newbal:d,plan_date:u,plan_status:h,network:g,plan_name:p,network_type:v}=e;return(0,F.jsxs)(x.A,{hover:!0,tabIndex:-1,role:"checkbox",children:[(0,F.jsx)(y.A,{sx:{display:"flex",alignItems:"center"},children:(0,F.jsx)(f.A,{variant:"subtitle2",noWrap:!0,children:s})}),(0,F.jsx)(y.A,{align:"left",children:(null===(n=z.find(a=>a.value===la))||void 0===n?void 0:n.label)||"N/A"}),(0,F.jsxs)(y.A,{align:"left",children:[g&&(0,F.jsxs)(F.Fragment,{children:[g," - "]}),v&&(0,F.jsxs)(F.Fragment,{children:[v," - "]}),p]}),(0,F.jsx)(y.A,{align:"left",children:i}),(0,F.jsxs)(y.A,{align:"left",children:["\u20a6",(0,L.KZ)(r)]}),(0,F.jsxs)(y.A,{align:"left",children:["\u20a6",(0,L.KZ)(o)]}),(0,F.jsxs)(y.A,{align:"left",children:["\u20a6",(0,L.KZ)(d)]}),(0,F.jsx)(y.A,{align:"left",children:u}),(0,F.jsx)(y.A,{align:"left",children:(0,F.jsx)(T.A,{variant:"light"===a.palette.mode?"ghost":"filled",color:1===h?"success":0===h?"warning":"error",children:(0,l.o3)((0===h?"processing":1===h&&"successful")||2===h&&"failed")})}),(0,F.jsx)(y.A,{align:"left",children:(0,F.jsx)(j.A,{variant:"contained",size:"small",component:c.N_,to:"".concat(S.nB.general.invioce,"/").concat(s,"/").concat(la),children:"Invoice"})})]},s||t)})}),$&&(0,F.jsx)(A.A,{children:(0,F.jsx)(x.A,{children:(0,F.jsx)(y.A,{align:"center",colSpan:10,sx:{py:3},children:(0,F.jsx)(B.A,{searchQuery:q})})})})]})})}),(0,F.jsx)(_.A,{control:(0,F.jsx)(k.A,{checked:V,onChange:a=>function(a){Y(a.target.checked)}(a)}),label:"Dense padding",align:"left"}),(0,F.jsx)(w.A,{rowsPerPageOptions:[5,10,25,100],component:"div",count:Q,rowsPerPage:J,page:K,onPageChange:(a,e)=>sa(e,J,ea,q,la),onRowsPerPageChange:a=>{U(parseInt(a.target.value,10)),sa(0,a.target.value,ea,q,la),Z(0)}})]})]})})}},50467:(a,e,t)=>{t.d(e,{A:()=>d});var l=t(80045),n=t(89379),c=t(34535),s=t(90310),i=t(70579);const r=["color","variant","children"],o=(0,c.Ay)("span")(a=>{let{theme:e,ownerState:t}=a;const l="light"===e.palette.mode,{color:c,variant:i}=t;return(0,n.A)({height:22,minWidth:22,lineHeight:0,borderRadius:8,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:e.spacing(0,1),color:e.palette.grey[800],fontSize:e.typography.pxToRem(12),fontFamily:e.typography.fontFamily,backgroundColor:e.palette.grey[300],fontWeight:e.typography.fontWeightBold},"default"!==c?(0,n.A)((0,n.A)((0,n.A)({},"filled"===i&&(0,n.A)({},(a=>({color:e.palette[a].contrastText,backgroundColor:e.palette[a].main}))(c))),"outlined"===i&&(0,n.A)({},(a=>({color:e.palette[a].main,backgroundColor:"transparent",border:"1px solid ".concat(e.palette[a].main)}))(c))),"ghost"===i&&(0,n.A)({},(a=>({color:e.palette[a][l?"dark":"light"],backgroundColor:(0,s.X4)(e.palette[a].main,.16)}))(c))):(0,n.A)((0,n.A)({},"outlined"===i&&{backgroundColor:"transparent",color:e.palette.text.primary,border:"1px solid ".concat(e.palette.grey[50032])}),"ghost"===i&&{color:l?e.palette.text.secondary:e.palette.common.white,backgroundColor:e.palette.grey[50016]}))});function d(a){let{color:e="default",variant:t="ghost",children:c}=a,s=(0,l.A)(a,r);return(0,i.jsx)(o,(0,n.A)((0,n.A)({ownerState:{color:e,variant:t}},s),{},{children:c}))}}}]);
//# sourceMappingURL=4327.c2e78171.chunk.js.map