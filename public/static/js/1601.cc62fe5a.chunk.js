"use strict";(self.webpackChunkabokisub_recovered=self.webpackChunkabokisub_recovered||[]).push([[1601],{1601:(e,a,o)=>{o.r(a),o.d(a,{default:()=>R});var n=o(19252),t=o(48407),l=o(11737),i=o(19838),s=o(24753),r=o(80899),d=o(65043),c=o(46987),u=o(73216),v=o(73023),p=o.n(v),m=o(24858),h=o(18403),x=o(72812),g=o(68903),b=o(14194),f=o(12110),A=o(96446),y=o(85865),j=o(88911),w=o(84473),C=o(33708),S=o(73338),k=o(30342),I=o(70579);function B(){var e;const a=r.Ik().shape({iuc:r.Yj().required("IUC Number Required")}),o=r.Ik().shape({iuc:r.Yj().required("IUC Number Required"),pin:r.Yj().min(4,"Transaction Pin Must Be 4 Digits").max(4,"Transaction Pin Must Be 4 Digit").required("Transaction Pin Required")}),{enqueueSnackbar:n}=(0,c.dh)(),[l,i]=(0,d.useState)(),[s,v]=(0,d.useState)(),[B,R]=(0,d.useState)(),[T,M]=(0,d.useState)(),[N,P]=(0,d.useState)(),[_,O]=(0,d.useState)(),W=window.localStorage.getItem("accessToken"),{setting:q}=(0,k.A)(),L=1===(null===q||void 0===q||null===(e=q.setting)||void 0===e?void 0:e.allow_pin),U=(0,m.mN)({resolver:(0,h.t)(L?o:a)}),V=(0,u.Zp)(),[z,Y]=(0,d.useState)(),{setValue:D,watch:E,handleSubmit:G,formState:{errors:Z,isSubmitting:K}}=U;(0,d.useEffect)(()=>{w.A.get("/api/website/app/cable/lock").then(e=>{var a;i(null===(a=e.data)||void 0===a?void 0:a.cable)})},[]);const H=E(),X=null===H||void 0===H?void 0:H.bypass,F=[{name:"DSTV",code:2},{name:"STARTIME",code:3},{name:"GOTV",code:1}];return(0,I.jsx)(C.Op,{methods:U,onSubmit:G(X?async e=>{const a=F.filter(e=>e.code===B);let o="";a[0]&&(o=a[0].name);try{if(await p()({title:"Confirmation",text:"You are about to make a payment of ".concat(_," for your cable TV subscription to ").concat(o,". Your IUC number is ").concat(e.iuc,"."),icon:"warning",buttons:["Cancel","Confirm"]})){var n,l;const a=await w.A.post("/api/cable",{cable:B,iuc:e.iuc,cable_plan:T,bypass:(null===e||void 0===e?void 0:e.bypass)||!1,pin:e.pin,token:W});var i;if("success"===(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.status))p()({title:"success",text:"".concat(null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message),icon:"success",buttons:["Okay","Invoice"],dangerMode:!0}).then(e=>{var o;e&&V("".concat(t.nB.general.invioce,"/").concat(null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.transid,"/cable"),{replace:!0});window.location.reload()});else if("fail"===(null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.status)){var s;p()("Opps","".concat(null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message),"error")}else{var r;p()("Info","".concat(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message),"info")}}}catch(u){var d,c;if(void 0!==(null===u||void 0===u||null===(d=u.data)||void 0===d?void 0:d.message))p()("Opps","".concat(null===u||void 0===u||null===(c=u.data)||void 0===c?void 0:c.message),"error");else void 0!==(null===u||void 0===u?void 0:u.message)?p()("Opps","".concat(null===u||void 0===u?void 0:u.message),"error"):p()("Opps","Something went wrong","error")}}:async e=>{try{var a;const o=await w.A.get("/api/cable/cable-validation?iuc=".concat(e.iuc,"&cable=").concat(B));D("bypass",!0),v(null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.name)}catch(l){var o,t;if(v(void 0),void 0!==(null===(o=l.data)||void 0===o?void 0:o.message))n(null===(t=l.data)||void 0===t?void 0:t.message,{variant:"error"});else void 0!==(null===l||void 0===l?void 0:l.message)?n(null===l||void 0===l?void 0:l.message,{variant:"error"}):n("Something Went Wrong",{variant:"error"})}}),children:(0,I.jsx)(g.Ay,{container:!0,spacing:3,children:(0,I.jsxs)(g.Ay,{item:!0,xs:12,md:8,children:[!!Z.afterSubmit&&(0,I.jsx)(b.A,{severity:"error",children:Z.afterSubmit.message}),(0,I.jsxs)(f.A,{sx:{p:3},children:[(0,I.jsxs)(A.A,{sx:{display:"grid",columnGap:1,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"}},children:[(0,I.jsxs)(C.tX,{name:"cable",label:"Cable Name",onChange:e=>(async e=>{R(e),await w.A.get("/api/cable/plan/".concat(e,"/adex/system")).then(e=>{var a;P(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.plan)}).catch(P(void 0))})(e.target.value),value:B,children:[(0,I.jsx)("option",{value:""}),void 0!==l&&(null===F||void 0===F?void 0:F.map(e=>(0,I.jsx)("option",{value:null===e||void 0===e?void 0:e.code,disabled:1===(null===e||void 0===e?void 0:e.code)&&0===(null===l||void 0===l?void 0:l.gotv)||2===(null===e||void 0===e?void 0:e.code)&&0===(null===l||void 0===l?void 0:l.dstv)||3===(null===e||void 0===e?void 0:e.code)&&0===(null===l||void 0===l?void 0:l.startime),children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.code)))]}),(0,I.jsxs)(C.tX,{name:"plan",label:"cable Plan",value:T,onChange:async e=>{M(e.target.value),w.A.get("/api/cable/charges/".concat(e.target.value,"/admin")).then(e=>{var a,o;Y("\u20a6".concat((0,S.KZ)(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.charges))),O("\u20a6".concat((0,S.KZ)(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.amount)))}).catch(e=>{var a,o;(Y(void 0),O(void 0),void 0!==(null===(a=e.data)||void 0===a?void 0:a.message))?n(null===(o=e.data)||void 0===o?void 0:o.message,{variant:"error"}):void 0!==(null===e||void 0===e?void 0:e.message)?n(null===e||void 0===e?void 0:e.message,{variant:"error"}):n("Something Went Wrong",{variant:"error"})})},children:[(0,I.jsx)("option",{value:""}),null===N||void 0===N?void 0:N.map(e=>(0,I.jsx)("option",{value:null===e||void 0===e?void 0:e.plan_id,children:"".concat(null===e||void 0===e?void 0:e.cable_name," => ").concat(null===e||void 0===e?void 0:e.plan_name," for \u20a6").concat((0,S.KZ)(null===e||void 0===e?void 0:e.plan_price))},null===e||void 0===e?void 0:e.plan_id))]}),(0,I.jsx)(C.o3,{name:"iuc",label:"IUC NUMBER"}),L&&(0,I.jsx)(C.o3,{name:"pin",label:"Transaction Pin",type:"password",autoComplete:"new-password",inputProps:{inputMode:"numeric",pattern:"[0-9]*"}}),void 0!==_&&(0,I.jsx)(C.o3,{name:"amount",label:"Amount",value:_,disabled:!0}),void 0!==z&&(0,I.jsx)(C.o3,{name:"charges",label:"Charges",value:z,disabled:!0}),void 0!==s&&(0,I.jsx)(C.o3,{name:"customername",label:"customer name",value:s,disabled:!0}),(0,I.jsx)(C.b8,{name:"bypass",labelPlacement:"start",def:!1,label:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(y.A,{variant:"subtitle2",sx:{mb:.5},children:"Bypass IUC Number"})}),sx:{mx:0,width:1,justifyContent:"space-between"}})]}),(0,I.jsx)(j.A,{alignItems:"flex-end",sx:{mt:3},children:(0,I.jsx)(x.A,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:K,children:X?"Purchase":"Verify IUC Number"})})]})]})})})}function R(){const{themeStretch:e}=(0,l.A)();return(0,I.jsx)(i.A,{title:"Buy Cable",children:(0,I.jsxs)(n.A,{maxWidth:!e&&"lg",children:[(0,I.jsx)(s.A,{heading:"Buy Cable Subscription",links:[{name:"Dashboard",href:t.nB.root},{name:"Cable Sub"}]}),(0,I.jsx)(B,{})]})})}},22698:(e,a,o)=>{o.d(a,{A:()=>T});var n=o(58168),t=o(98587),l=o(65043),i=o(58387),s=o(98610),r=o(88092),d=o(34535),c=o(98206),u=o(85865),v=o(67266),p=o(66734),m=o(70579);const h=(0,p.A)((0,m.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var x=o(72949);const g=["slots","slotProps"],b=(0,d.Ay)(x.A)(e=>{let{theme:a}=e;return(0,n.A)({display:"flex",marginLeft:"calc(".concat(a.spacing(1)," * 0.5)"),marginRight:"calc(".concat(a.spacing(1)," * 0.5)")},"light"===a.palette.mode?{backgroundColor:a.palette.grey[100],color:a.palette.grey[700]}:{backgroundColor:a.palette.grey[700],color:a.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,n.A)({},"light"===a.palette.mode?{backgroundColor:a.palette.grey[200]}:{backgroundColor:a.palette.grey[600]}),"&:active":(0,n.A)({boxShadow:a.shadows[0]},"light"===a.palette.mode?{backgroundColor:(0,v.tL)(a.palette.grey[200],.12)}:{backgroundColor:(0,v.tL)(a.palette.grey[600],.12)})})}),f=(0,d.Ay)(h)({width:24,height:16});const A=function(e){const{slots:a={},slotProps:o={}}=e,l=(0,t.A)(e,g),i=e;return(0,m.jsx)("li",{children:(0,m.jsx)(b,(0,n.A)({focusRipple:!0},l,{ownerState:i,children:(0,m.jsx)(f,(0,n.A)({as:a.CollapsedIcon,ownerState:i},o.collapsedIcon))}))})};var y=o(92532),j=o(72372);function w(e){return(0,j.Ay)("MuiBreadcrumbs",e)}const C=(0,y.A)("MuiBreadcrumbs",["root","ol","li","separator"]),S=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],k=(0,d.Ay)(u.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,a)=>[{["& .".concat(C.li)]:a.li},a.root]})({}),I=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,a)=>a.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),B=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,a)=>a.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function R(e,a,o,n){return e.reduce((t,l,i)=>(i<e.length-1?t=t.concat(l,(0,m.jsx)(B,{"aria-hidden":!0,className:a,ownerState:n,children:o},"separator-".concat(i))):t.push(l),t),[])}const T=l.forwardRef(function(e,a){const o=(0,c.b)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:u,component:v="nav",slots:p={},slotProps:h={},expandText:x="Show path",itemsAfterCollapse:g=1,itemsBeforeCollapse:b=1,maxItems:f=8,separator:y="/"}=o,j=(0,t.A)(o,S),[C,B]=l.useState(!1),T=(0,n.A)({},o,{component:v,expanded:C,expandText:x,itemsAfterCollapse:g,itemsBeforeCollapse:b,maxItems:f,separator:y}),M=(e=>{const{classes:a}=e;return(0,s.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},w,a)})(T),N=(0,r.A)({elementType:p.CollapsedIcon,externalSlotProps:h.collapsedIcon,ownerState:T}),P=l.useRef(null),_=l.Children.toArray(d).filter(e=>l.isValidElement(e)).map((e,a)=>(0,m.jsx)("li",{className:M.li,children:e},"child-".concat(a)));return(0,m.jsx)(k,(0,n.A)({ref:a,component:v,color:"text.secondary",className:(0,i.A)(M.root,u),ownerState:T},j,{children:(0,m.jsx)(I,{className:M.ol,ref:P,ownerState:T,children:R(C||f&&_.length<=f?_:(e=>b+g>=e.length?e:[...e.slice(0,b),(0,m.jsx)(A,{"aria-label":x,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:N},onClick:()=>{B(!0);const e=P.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-g,e.length)])(_),M.separator,y,T)})}))})},24753:(e,a,o)=>{o.d(a,{A:()=>g});var n=o(89379),t=o(80045),l=o(90620),i=o.n(l),s=o(96446),r=o(85865),d=o(88446),c=o(35475),u=o(22698),v=o(70579);const p=["links","activeLast"];function m(e){let{links:a,activeLast:o=!1}=e,l=(0,t.A)(e,p);const i=a[a.length-1].name,d=a.map(e=>(0,v.jsx)(h,{link:e},e.name)),c=a.map(e=>(0,v.jsx)("div",{children:e.name!==i?(0,v.jsx)(h,{link:e}):(0,v.jsx)(r.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:i})},e.name));return(0,v.jsx)(u.A,(0,n.A)((0,n.A)({separator:(0,v.jsx)(s.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},l),{},{children:o?d:c}))}function h(e){let{link:a}=e;const{href:o,name:n,icon:t}=a;return(0,v.jsxs)(d.A,{variant:"body2",component:c.N_,to:o||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[t&&(0,v.jsx)(s.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:t}),n]},n)}const x=["links","action","heading","moreLink","sx"];function g(e){let{links:a,action:o,heading:l,moreLink:c=[],sx:u}=e,p=(0,t.A)(e,x);return(0,v.jsxs)(s.A,{sx:(0,n.A)({mb:5},u),children:[(0,v.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,v.jsxs)(s.A,{sx:{flexGrow:1},children:[(0,v.jsx)(r.A,{variant:"h4",gutterBottom:!0,children:l}),(0,v.jsx)(m,(0,n.A)({links:a},p))]}),o&&(0,v.jsx)(s.A,{sx:{flexShrink:0},children:o})]}),(0,v.jsx)(s.A,{sx:{mt:2},children:i()(c)?(0,v.jsx)(d.A,{href:c,target:"_blank",rel:"noopener",variant:"body2",children:c}):c.map(e=>(0,v.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e))})]})}}}]);
//# sourceMappingURL=1601.cc62fe5a.chunk.js.map