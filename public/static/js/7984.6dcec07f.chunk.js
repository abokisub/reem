"use strict";(self.webpackChunkabokisub_recovered=self.webpackChunkabokisub_recovered||[]).push([[7984],{17984:(t,e,a)=>{a.r(e),a.d(e,{default:()=>tt});var s=a(89379),i=a(67457),n=a(65043),l=a(35475),r=a(93252),c=a(26240),o=a(19252),d=a(12110),h=a(96446),u=a(53193),m=a(18356),p=a(23914),g=a(32143),x=a(8939),A=a(24056),b=a(79650),W=a(71806),v=a(73460),j=a(28076),y=a(10039),f=a(88911),w=a(81045),C=a(85865),_=a(39336),S=a(78977),k=a(4598),T=a(19090),z=a(66734),L=a(70579);const V=(0,z.A)((0,L.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),N=(0,z.A)((0,L.jsx)("path",{d:"m1 9 2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9m8 8 3 3 3-3c-1.65-1.66-4.34-1.66-6 0m-4-4 2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13"}),"Wifi"),H=(0,z.A)((0,L.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone"),M=(0,z.A)((0,L.jsx)("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.1-.9-2-2-2m0 14H3V5h18z"}),"Tv"),R=(0,z.A)((0,L.jsx)("path",{d:"M7 2v11h3v9l7-12h-4l4-8z"}),"FlashOn"),F=(0,z.A)((0,L.jsx)("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"}),"School"),B=(0,z.A)((0,L.jsx)("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2zm-9-2h10V8H12zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"AccountBalanceWallet"),D=(0,z.A)((0,L.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCard");var P=a(74605),I=a(48407),E=a(11737),O=a(19838),G=a(50467),K=a(90797),Z=a(12670),Q=a(24753),X=a(73338),q=a(78868),J=a(84473);const U=[{id:"recipients",label:"Transaction Details",alignRight:!1},{id:"status",label:"Status",alignRight:!1},{id:"amount",label:"Amount",alignRight:!0},{id:"action",label:"Action",alignRight:!0}],Y=[{value:"ALL",label:"ALL"},{value:1,label:"success"},{value:0,label:"processing"},{value:2,label:"fail"}],$=[{value:"all",label:"All Transactions",endpoint:"history"},{value:"data",label:"Data Transactions",endpoint:"datatrans"},{value:"airtime",label:"Airtime Transactions",endpoint:"airtime/trans"},{value:"cable",label:"Cable TV Transactions",endpoint:"cable/trans"},{value:"bill",label:"Bill Payment",endpoint:"bill/trans"},{value:"deposit",label:"Deposit Transactions",endpoint:"deposit/trans"},{value:"airtimecash",label:"Airtime 2 Cash",endpoint:"airtimecash/trans"},{value:"result",label:"Result Checker",endpoint:"result/trans"},{value:"data_card",label:"Data Card",endpoint:"data_card"},{value:"recharge_card",label:"Recharge Card",endpoint:"recharge_card"}];function tt(){const t=(0,c.A)(),{themeStretch:e}=(0,E.A)(),a=(0,r.A)("down","sm"),[z,tt]=(0,n.useState)([]),[et,at]=(0,n.useState)(0),[st,it]=(0,n.useState)(!0),[nt,lt]=(0,n.useState)(0),[rt,ct]=(0,n.useState)(""),[ot,dt]=(0,n.useState)(10),[ht,ut]=(0,n.useState)(!1),[mt,pt]=(0,n.useState)(!1),[gt,xt]=(0,n.useState)("ALL"),[At,bt]=(0,n.useState)("all"),Wt=window.localStorage.getItem("accessToken");(0,n.useEffect)(()=>{vt(et,ot,gt,rt,At)},[]);const vt=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,n=t+1;it(!0);try{var l,r,c;let d,h;if("all"===i){var o;d=await J.A.get("/api/system/all/history/records/".concat(Wt,"/secure?page=").concat(n,"&limit=").concat(e,"&status=").concat(a,"&search=").concat(s)),h=null===(o=d.data)||void 0===o?void 0:o.all_summary}else{const t=$.find(t=>t.value===i);d=await J.A.get("/api/system/all/".concat(t.endpoint,"/habukhan/").concat(Wt,"/secure?page=").concat(n,"&limit=").concat(e,"&status=").concat(a,"&search=").concat(s));const l=Object.keys(d.data).find(t=>t.includes("_trans")||t.includes("data_card")||t.includes("recharge_card"));h=d.data[l]}tt((null===(l=h)||void 0===l?void 0:l.data)||[]),lt((null===(r=h)||void 0===r?void 0:r.total)||0),it(!1),at(t),pt(0===((null===(c=h)||void 0===c?void 0:c.total)||0))}catch(d){console.error("Error fetching transactions:",d),it(!1),tt([]),pt(!0)}};return(0,L.jsx)(O.A,{title:"Transactions",children:(0,L.jsxs)(o.A,{maxWidth:!e&&"lg",children:[(0,L.jsx)(Q.A,{heading:"Transaction Summary",links:[{name:"Dashboard",href:I.nB.general.app},{name:"List"}]}),(0,L.jsxs)(d.A,{children:[(0,L.jsxs)(h.A,{sx:{p:2,display:"flex",gap:2,alignItems:"center"},children:[(0,L.jsxs)(u.A,{sx:{minWidth:200},size:"small",children:[(0,L.jsx)(m.A,{children:"Category"}),(0,L.jsx)(p.A,{value:At,label:"Category",onChange:t=>{const e=t.target.value;bt(e),at(0),vt(0,ot,gt,rt,e)},children:$.map(t=>(0,L.jsx)(g.A,{value:t.value,children:t.label},t.value))})]}),(0,L.jsx)(x.A,{value:gt,scrollButtons:"auto",variant:"scrollable",allowScrollButtonsMobile:!0,onChange:(t,e)=>{xt(e),vt(0,ot,e,rt,At)},children:Y.map(t=>(0,L.jsx)(A.A,{disableRipple:!0,label:(0,i.De)(t.label),value:t.value},t.value))})]}),(0,L.jsx)(q.tC,{filterName:rt,onFilterName:async t=>{ct(t),at(0),vt(0,ot,gt,t,At)}}),(0,L.jsx)(K.A,{children:(0,L.jsx)(b.A,{sx:{minWidth:800},children:(0,L.jsxs)(W.A,{size:ht?"small":"medium",children:[(0,L.jsx)(q.dx,{order:"asc",orderBy:"id",headLabel:U,rowCount:z.length}),st?(0,L.jsx)(v.A,{children:(0,L.jsx)(j.A,{children:(0,L.jsx)(y.A,{align:"center",colSpan:4,sx:{py:3},children:(0,L.jsx)(C.A,{variant:"body2",children:"Loading ..."})})})}):(0,L.jsx)(v.A,{children:z.map((e,n)=>{const{transid:r,amount:c,oldbal:o,newbal:u,plan_status:m,plan_name:p,plan_phone:g,sender_number:x,message:A,plan_date:b,habukhan_date:W,Habukhan_date:v,adex_date:k,date:T,iuc:z,meter_number:P,phone:E,phone_number:O,phone_account:K,account_number:Z,numbers:Q,name:q,exam_name:J,disco_name:U,bank_name:Y,created_at:$,cable_name:tt,role:et,network:at}=e;let st=K||g||E||O||x||z||P||Z||Q;if(!st&&A){const t=A.match(/\d{10,11}/);t&&(st=t[0])}st=st||"N/A";const it=b||v||W||k||$||T||"N/A",nt=p||q||J||U||Y||tt||A||"Service Purchase";let lt=At;if("all"===lt)if(et)lt=et;else{const t=A?A.toLowerCase():"";lt=tt||t.includes("dstv")||t.includes("gotv")||t.includes("startimes")?"cable":U||t.includes("meter")||t.includes("electricity")||t.includes("disco")?"bill":J||t.includes("waec")||t.includes("neco")||t.includes("scratch card")?"result":t.includes("airtime to cash")||t.includes("convert to cash")||t.includes("airtime 2 cash")?"airtimecash":t.includes("funding")||t.includes("wallet")||t.includes("deposit")?"deposit":p||t.includes("data")||t.includes("gifted")||t.includes("shared")||t.includes("sme")||t.includes("gifting")||t.includes("corporate")?"data":t.includes("airtime")||t.includes("vtu")||t.includes("sns")||t.includes("recharge")||t.includes("purchase")&&at?"airtime":"data"}"exam"===lt&&(lt="result"),"credit"!==lt&&"momo"!==lt||(lt="deposit"),"manual"===lt&&(lt="manual"),"cash"===lt&&(lt="airtimecash");["data","airtime","cable","bill","deposit","airtimecash","result","manual","bulksms","data_card","recharge_card"].includes(lt)||(lt="data");let rt=V;"data"!==lt&&"datatrans"!==lt||(rt=N),"airtime"!==lt&&"airtime/trans"!==lt||(rt=H),"cable"!==lt&&"cable/trans"!==lt||(rt=M),"bill"!==lt&&"bill/trans"!==lt||(rt=R),"result"!==lt&&"result/trans"!==lt||(rt=F),"deposit"!==lt&&"fund"!==lt&&"wallet"!==lt||(rt=B),"airtimecash"!==lt&&"cash"!==lt||(rt=D);const ct="deposit"===lt||"fund"===lt||"wallet"===lt||"airtimecash"===lt;return a?(0,L.jsx)(j.A,{children:(0,L.jsx)(y.A,{sx:{p:2,display:"block",width:"100%"},children:(0,L.jsxs)(d.A,{sx:{p:2,bgcolor:"light"===t.palette.mode?"background.neutral":"background.paper"},children:[(0,L.jsxs)(f.A,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,sx:{mb:2},children:[(0,L.jsxs)(f.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,L.jsx)(w.A,{sx:{bgcolor:"light"===t.palette.mode?"#F4F6F8":"#333",color:t.palette.primary.main},children:(0,L.jsx)(rt,{})}),(0,L.jsxs)(h.A,{children:[(0,L.jsx)(C.A,{variant:"subtitle2",noWrap:!0,sx:{maxWidth:180},children:nt||"Transaction"}),(0,L.jsx)(C.A,{variant:"caption",sx:{color:"text.secondary",display:"block"},children:it})]})]}),(0,L.jsx)(G.A,{variant:"light"===t.palette.mode?"ghost":"filled",color:1===m?"success":2===m?"error":"warning",children:(0,i.o3)(0===m?"Wait":1===m?"Success":"Failed")})]}),(0,L.jsx)(_.A,{sx:{borderStyle:"dashed",mb:2}}),(0,L.jsxs)(f.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,L.jsxs)(f.A,{children:[(0,L.jsx)(C.A,{variant:"caption",sx:{color:"text.secondary"},children:"Amount"}),(0,L.jsxs)(C.A,{variant:"subtitle1",sx:{fontWeight:"bold",color:ct?"success.main":"text.primary"},children:[ct?"+":"-","\u20a6",(0,X.KZ)(c)]})]}),(0,L.jsx)(S.A,{size:"small",variant:"outlined",component:l.N_,to:"".concat(I.nB.general.invioce,"/").concat(r,"/").concat(lt),state:{transaction:(0,s.A)((0,s.A)({},e),{},{beneficiary:st,plan_name:nt,network:at||(()=>{const t=nt?nt.toLowerCase():"",e=st?st.toString():"";return t.includes("mtn")?"MTN":t.includes("airtel")?"Airtel":t.includes("glo")?"Glo":t.includes("9mobile")||t.includes("etisalat")?"9mobile":t.includes("dstv")?"DSTV":t.includes("gotv")?"GOTV":t.includes("startimes")?"Startimes":t.includes("electric")||t.includes("power")?"Electricity":t.includes("waec")||t.includes("neco")?"WAEC/NECO":t.includes("gifted")||t.includes("sme")||t.includes("share")||t.includes("corporate")||e.startsWith("0803")||e.startsWith("0806")||e.startsWith("0703")||e.startsWith("0706")||e.startsWith("0813")||e.startsWith("0816")||e.startsWith("0810")||e.startsWith("0814")||e.startsWith("0903")||e.startsWith("0906")||e.startsWith("0913")||e.startsWith("0916")||e.startsWith("0704")?"MTN":e.startsWith("0802")||e.startsWith("0808")||e.startsWith("0708")||e.startsWith("0812")||e.startsWith("0701")||e.startsWith("0902")||e.startsWith("0907")||e.startsWith("0901")||e.startsWith("0912")||e.startsWith("0904")?"Airtel":e.startsWith("0805")||e.startsWith("0807")||e.startsWith("0705")||e.startsWith("0815")||e.startsWith("0811")||e.startsWith("0905")||e.startsWith("0915")?"Glo":e.startsWith("0809")||e.startsWith("0818")||e.startsWith("0817")||e.startsWith("0909")||e.startsWith("0908")?"9mobile":"N/A"})(),plan_date:it,category:lt})},children:"View Receipt"})]})]})})},r||n):(0,L.jsxs)(j.A,{hover:!0,sx:{"& td":{borderBottom:"1px dashed #eef2f6"}},children:[(0,L.jsx)(y.A,{align:"left",children:(0,L.jsxs)(f.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,L.jsx)(w.A,{sx:{bgcolor:t=>"light"===t.palette.mode?"#F4F6F8":"#333",color:t=>t.palette.primary.main},children:(0,L.jsx)(rt,{})}),(0,L.jsxs)(f.A,{children:[(0,L.jsx)(C.A,{variant:"subtitle2",noWrap:!0,sx:{maxWidth:240},children:nt}),(0,L.jsxs)(C.A,{variant:"caption",sx:{color:"text.secondary"},children:[it," \xa0\u2022\xa0 ",st]})]})]})}),(0,L.jsx)(y.A,{align:"left",children:(0,L.jsx)(G.A,{variant:"light"===t.palette.mode?"ghost":"filled",color:1===m?"success":2===m?"error":"warning",children:(0,i.o3)((0===m?"processing":1===m&&"successful")||2===m&&"failed")})}),(0,L.jsx)(y.A,{align:"right",children:(0,L.jsxs)(C.A,{variant:"subtitle1",sx:{fontWeight:"bold",color:ct?"success.main":"text.primary"},children:[ct?"+":"-","\u20a6",(0,X.KZ)(c)]})}),(0,L.jsx)(y.A,{align:"right",children:(0,L.jsx)(S.A,{size:"small",component:l.N_,to:"".concat(I.nB.general.invioce,"/").concat(r,"/").concat(lt),state:{transaction:(0,s.A)((0,s.A)({},e),{},{beneficiary:st,plan_name:nt,network:at||(()=>{const t=nt?nt.toLowerCase():"",e=st?st.toString():"";return t.includes("mtn")?"MTN":t.includes("airtel")?"Airtel":t.includes("glo")?"Glo":t.includes("9mobile")||t.includes("etisalat")?"9mobile":t.includes("dstv")?"DSTV":t.includes("gotv")?"GOTV":t.includes("startimes")?"Startimes":t.includes("electric")||t.includes("power")?"Electricity":t.includes("waec")||t.includes("neco")?"WAEC/NECO":t.includes("gifted")||t.includes("sme")||t.includes("share")||t.includes("corporate")||e.startsWith("0803")||e.startsWith("0806")||e.startsWith("0703")||e.startsWith("0706")||e.startsWith("0813")||e.startsWith("0816")||e.startsWith("0810")||e.startsWith("0814")||e.startsWith("0903")||e.startsWith("0906")||e.startsWith("0913")||e.startsWith("0916")||e.startsWith("0704")?"MTN":e.startsWith("0802")||e.startsWith("0808")||e.startsWith("0708")||e.startsWith("0812")||e.startsWith("0701")||e.startsWith("0902")||e.startsWith("0907")||e.startsWith("0901")||e.startsWith("0912")||e.startsWith("0904")?"Airtel":e.startsWith("0805")||e.startsWith("0807")||e.startsWith("0705")||e.startsWith("0815")||e.startsWith("0811")||e.startsWith("0905")||e.startsWith("0915")?"Glo":e.startsWith("0809")||e.startsWith("0818")||e.startsWith("0817")||e.startsWith("0909")||e.startsWith("0908")?"9mobile":"N/A"})(),plan_date:it,category:lt})},sx:{textTransform:"none",fontWeight:"bold",whiteSpace:"nowrap"},children:"View Receipt"})})]},r||n)})}),mt&&(0,L.jsx)(v.A,{children:(0,L.jsx)(j.A,{children:(0,L.jsx)(y.A,{align:"center",colSpan:4,sx:{py:3},children:(0,L.jsx)(Z.A,{searchQuery:rt})})})})]})})}),(0,L.jsxs)(f.A,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{p:2},children:[(0,L.jsx)(P.A,{control:(0,L.jsx)(k.A,{checked:ht,onChange:t=>ut(t.target.checked)}),label:"Dense padding"}),(0,L.jsx)(T.A,{rowsPerPageOptions:[5,10,25,50,100],component:"div",count:nt,rowsPerPage:ot,page:et,onPageChange:(t,e)=>vt(e,ot,gt,rt,At),onRowsPerPageChange:t=>{const e=parseInt(t.target.value,10);dt(e),vt(0,e,gt,rt,At),at(0)}})]})]})]})})}},50467:(t,e,a)=>{a.d(e,{A:()=>d});var s=a(80045),i=a(89379),n=a(34535),l=a(90310),r=a(70579);const c=["color","variant","children"],o=(0,n.Ay)("span")(t=>{let{theme:e,ownerState:a}=t;const s="light"===e.palette.mode,{color:n,variant:r}=a;return(0,i.A)({height:22,minWidth:22,lineHeight:0,borderRadius:8,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",padding:e.spacing(0,1),color:e.palette.grey[800],fontSize:e.typography.pxToRem(12),fontFamily:e.typography.fontFamily,backgroundColor:e.palette.grey[300],fontWeight:e.typography.fontWeightBold},"default"!==n?(0,i.A)((0,i.A)((0,i.A)({},"filled"===r&&(0,i.A)({},(t=>({color:e.palette[t].contrastText,backgroundColor:e.palette[t].main}))(n))),"outlined"===r&&(0,i.A)({},(t=>({color:e.palette[t].main,backgroundColor:"transparent",border:"1px solid ".concat(e.palette[t].main)}))(n))),"ghost"===r&&(0,i.A)({},(t=>({color:e.palette[t][s?"dark":"light"],backgroundColor:(0,l.X4)(e.palette[t].main,.16)}))(n))):(0,i.A)((0,i.A)({},"outlined"===r&&{backgroundColor:"transparent",color:e.palette.text.primary,border:"1px solid ".concat(e.palette.grey[50032])}),"ghost"===r&&{color:s?e.palette.text.secondary:e.palette.common.white,backgroundColor:e.palette.grey[50016]}))});function d(t){let{color:e="default",variant:a="ghost",children:n}=t,l=(0,s.A)(t,c);return(0,r.jsx)(o,(0,i.A)((0,i.A)({ownerState:{color:e,variant:a}},l),{},{children:n}))}}}]);
//# sourceMappingURL=7984.6dcec07f.chunk.js.map