URGENT: Update Your Webhook Secret - IMMEDIATE ACTION REQUIRED
================================================================

PROBLEM IDENTIFIED:
-------------------
You have the WRONG webhook secret in your .env file.

Your current .env has:
POINTWAVE_WEBHOOK_SECRET=whsec_383b656ab3e08d06598c6cec6f429d07a43047030265e45ff70b89d04f0f6e24

But PointWave is using a DIFFERENT secret to sign your webhooks.

THE FIX:
--------
We need to get the CORRECT (decrypted) webhook secret from PointWave's database.

Run this PHP script on PointWave server to get the correct secret:

<?php
require __DIR__.'/vendor/autoload.php';
$app = require_once __DIR__.'/bootstrap/app.php';
$app->make('Illuminate\Contracts\Console\Kernel')->bootstrap();

use App\Models\Company;

$company = Company::find(10); // Amtpay
echo "Correct webhook secret for Amtpay:\n";
echo $company->webhook_secret . "\n";
?>

THEN:
-----
1. Copy the output (the decrypted webhook secret)
2. Update your .env file:
   POINTWAVE_WEBHOOK_SECRET=<paste_the_correct_secret_here>

3. Fix your signature calculation code:
   CHANGE: $payload = json_encode($request->all());
   TO:     $payload = $request->getContent();

4. Remove the "BYPASSING signature check" code

AFTER THE FIX:
--------------
Webhooks will verify correctly and you can remove the security bypass.

---

CURRENT STATUS:
✅ Webhooks are being processed (with bypass)
⚠️ Using wrong webhook secret
⚠️ Signature verification bypassed (SECURITY RISK)
❌ Need correct secret + code fix

This is URGENT - your system is vulnerable to fraud while the bypass is active.
